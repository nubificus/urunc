document$.subscribe(()=>{document.querySelectorAll("pre > code").forEach((code)=>{const wrapper=code.closest("div.language-console");if(!wrapper)return;const button=wrapper.querySelector("button.md-clipboard");if(!button)return;button.addEventListener("mouseenter",()=>{if(code.hasAttribute("data-copy"))return;const text=code.textContent.trimEnd();let lines=[];let mergeNext=false;text.split("\n").forEach((line)=>{if(mergeNext){lines[lines.length-1]+=" "+line.trimStart();if(lines[lines.length-1].endsWith(" \\")){lines[lines.length-1]=lines[lines.length-1].slice(0,-2);}else if(lines[lines.length-1].endsWith("\\")){lines[lines.length-1]=lines[lines.length-1].slice(0,-1);}else{mergeNext=false;}}
if(line.startsWith("$ ")){if(line.endsWith(" \\")){lines.push(line.slice(2,-2));mergeNext=true;}else if(line.endsWith("\\")){lines.push(line.slice(2,-1));mergeNext=true;}else{lines.push(line.slice(2));}}});const cleaned=lines.join("\n");code.setAttribute("data-copy",cleaned);},{once:true},);});});